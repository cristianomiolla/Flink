import{r as a,j as s,s as v}from"./index-wZQoyXLs.js";function b({isOpen:x,onClose:o}){const[,f]=a.useState(""),[t,i]=a.useState(""),[c,l]=a.useState(""),[d,u]=a.useState(!1),[m,r]=a.useState(""),[h,n]=a.useState("");if(!x)return null;const j=async e=>{if(e.preventDefault(),r(""),n(""),t!==c){r("Le password non corrispondono");return}if(t.length<6){r("La password deve essere di almeno 6 caratteri");return}u(!0);try{const{error:p}=await v.auth.updateUser({password:t});if(p){r(p.message);return}n("Password cambiata con successo!"),setTimeout(()=>{o(),f(""),i(""),l(""),n("")},2e3)}catch{r("Errore durante il cambio password. Riprova.")}finally{u(!1)}};return s.jsx("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&o(),children:s.jsxs("div",{className:"modal-content auth-modal",children:[s.jsx("div",{className:"auth-header-sticky",children:s.jsx("button",{className:"modal-close-btn",onClick:o,children:"Ã—"})}),s.jsx("div",{className:"auth-modal-header"}),s.jsxs("div",{className:"auth-content",children:[s.jsxs("div",{className:"header-card",children:[s.jsx("h2",{children:"CAMBIA PASSWORD"}),s.jsx("p",{children:"Inserisci la nuova password per il tuo account"})]}),s.jsxs("form",{className:"auth-form",onSubmit:j,children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:["Nuova Password ",s.jsx("span",{className:"required-indicator",children:"*"})]}),s.jsx("input",{type:"password",value:t,onChange:e=>i(e.target.value),className:"form-input",placeholder:"Inserisci la nuova password",required:!0,minLength:6})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{className:"form-label",children:["Conferma Password ",s.jsx("span",{className:"required-indicator",children:"*"})]}),s.jsx("input",{type:"password",value:c,onChange:e=>l(e.target.value),className:"form-input",placeholder:"Conferma la nuova password",required:!0,minLength:6})]}),m&&s.jsx("div",{className:"error-message",children:m}),h&&s.jsx("div",{className:"success-message",style:{background:"#D1FAE5",color:"#065F46",padding:"0.75rem",borderRadius:"4px",fontSize:"0.875rem",marginBottom:"1rem"},children:h}),s.jsx("button",{type:"submit",className:"action-btn",disabled:d,children:d?"Cambiando...":"Cambia Password"})]})]})]})})}export{b as PasswordChangeOverlay};
