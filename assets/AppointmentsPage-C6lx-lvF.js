import{b as Y,r as l,s as I,j as e,a as H,S as q,L as Q}from"./index-wZQoyXLs.js";import{A as Z}from"./AppointmentDetailsOverlay-CTV4FLcG.js";import{E as z}from"./EmptyState-DRbgyEKE.js";function J(){const{user:m,profile:x}=Y(),[v,s]=l.useState([]),[j,w]=l.useState(!1),[a,i]=l.useState(null),u=l.useCallback(async()=>{if(!m||!x){s([]);return}w(!0),i(null);try{let h=I.from("bookings").select("*").order("created_at",{ascending:!1});x.profile_type==="artist"?h=h.eq("artist_id",m.id).neq("status","pending"):h=h.eq("client_id",m.id).neq("status","pending");const{data:p,error:g}=await h;if(g)throw g;if(!p||p.length===0){s([]);return}const S=new Set;p.forEach(r=>{S.add(r.client_id),S.add(r.artist_id)});const{data:b,error:L}=await I.from("profiles").select("user_id, full_name, username, avatar_url").in("user_id",Array.from(S));if(L){s(p);return}const t=new Map;b?.forEach(r=>{t.set(r.user_id,r)});const c=p.map(r=>({...r,client_profile:t.get(r.client_id),artist_profile:t.get(r.artist_id)}));s(c)}catch(h){i(h instanceof Error?h.message:"Errore nel caricamento degli appuntamenti"),s([])}finally{w(!1)}},[m,x]);l.useEffect(()=>{m&&x?u():s([])},[u,m,x]);const o=l.useCallback(async()=>{await u()},[u]);return{appointments:v,loading:j,error:a,refreshAppointments:o}}function K({isOpen:m,onClose:x,bookingId:v,artistName:s,artistId:j,onReviewSubmitted:w}){const{user:a}=Y(),[i,u]=l.useState(0),[o,h]=l.useState(0),[p,g]=l.useState(""),[S,b]=l.useState(!1);if(!m)return null;const L=C=>{C.target===C.currentTarget&&r()},t=async C=>{if(C.preventDefault(),!(!a||!i)){b(!0);try{const{data:{user:A}}=await I.auth.getUser();if(!A)throw new Error("User not authenticated");let D=j;if(!D){const{data:f}=await I.from("bookings").select("artist_id").eq("id",v).single();D=f?.artist_id}if(!D)throw new Error("Artist ID not found");const{error:T}=await I.from("reviews").insert({booking_id:v,client_id:A.id,artist_id:D,rating:i,comment:p.trim()||null});if(T)throw T;w?.(),x()}catch(A){console.error("Error submitting review:",A)}finally{b(!1)}}},c=()=>{u(0),h(0),g(""),x()},r=()=>{u(0),h(0),g(""),x()},N=()=>Array.from({length:5},(C,A)=>{const D=A+1,T=D<=(o||i);return e.jsx("button",{type:"button",className:`star-button ${T?"filled":""}`,onMouseEnter:()=>h(D),onMouseLeave:()=>h(0),onClick:()=>u(D),children:"★"},A)});return e.jsx("div",{className:"modal-overlay",onClick:L,children:e.jsxs("div",{className:"modal-content auth-modal",children:[e.jsx("div",{className:"auth-header-sticky",children:e.jsx("button",{className:"modal-close-btn",onClick:r,children:"×"})}),e.jsx("div",{className:"auth-modal-header"}),e.jsxs("div",{className:"auth-content",children:[e.jsxs("div",{className:"header-card",children:[e.jsx("h2",{children:"LASCIA UNA RECENSIONE"}),e.jsx("p",{children:s?`Condividi la tua esperienza con ${s}`:"Condividi la tua esperienza"})]}),e.jsxs("form",{className:"auth-form",onSubmit:t,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["VALUTAZIONE ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"rating-section",children:[e.jsx("div",{className:"star-rating",children:N()}),e.jsx("div",{className:"rating-text",children:i>0&&e.jsxs("span",{className:"rating-value",children:[i," ",i===1?"stella":"stelle"]})})]}),e.jsx("div",{className:"form-help",children:"Clicca sulle stelle per assegnare una valutazione"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"review-comment",className:"form-label",children:"COMMENTO"}),e.jsx("textarea",{id:"review-comment",className:"form-textarea",placeholder:"Descrivi la tua esperienza, la qualità del lavoro, la professionalità...",rows:4,maxLength:1e3,value:p,onChange:C=>g(C.target.value)}),e.jsxs("div",{className:"bio-suggestions",children:[e.jsx("p",{className:"suggestions-title",children:"💡 Cosa includere nella recensione:"}),e.jsxs("ul",{className:"suggestions-list",children:[e.jsx("li",{className:"suggestion-item",children:"Qualità del tatuaggio realizzato"}),e.jsx("li",{className:"suggestion-item",children:"Professionalità e cortesia dell'artista"}),e.jsx("li",{className:"suggestion-item",children:"Pulizia e igiene dello studio"}),e.jsx("li",{className:"suggestion-item",children:"Rispetto dei tempi concordati"}),e.jsx("li",{className:"suggestion-item",children:"Consigli per la cura post-tatuaggio"})]})]}),e.jsxs("div",{className:"char-count",children:[p.length,"/1000 caratteri"]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"button",className:"action-btn",onClick:c,disabled:S,children:[e.jsx("svg",{className:"action-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),e.jsx("span",{className:"action-text",children:"Annulla"})]}),e.jsxs("button",{type:"submit",className:"action-btn",disabled:!i||S,children:[e.jsx("svg",{className:"action-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})}),e.jsx("span",{className:"action-text",children:S?"Invio...":"Invia Recensione"})]})]})]})]})]})})}function U({bookingId:m,participantName:x,refreshTrigger:v,onBookingUpdated:s,showParticipants:j=!1}){const{user:w,profile:a}=Y(),[i,u]=l.useState(!0),[o,h]=l.useState(null),[p,g]=l.useState(null),[S,b]=l.useState(!1),[L,t]=l.useState(!1);l.useEffect(()=>{(async()=>{if(!w||!m){u(!1);return}try{const{data:d}=await I.from("bookings").select("*").eq("id",m).maybeSingle();if(d)if(h({subject:d.subject,tattoo_style:d.tattoo_style,body_area:d.body_area,size_category:d.size_category,color_preferences:d.color_preferences,meaning:d.meaning,budget_min:d.budget_min,budget_max:d.budget_max,reference_images:d.reference_images,created_at:d.created_at,appointment_date:d.appointment_date,appointment_duration:d.appointment_duration,deposit_amount:d.deposit_amount,total_amount:d.total_amount,artist_notes:d.artist_notes,status:d.status,client_id:d.client_id,artist_id:d.artist_id}),d.status==="completed"){const{data:P}=await I.from("reviews").select("id, rating, comment, created_at").eq("booking_id",m).maybeSingle();g(P)}else g(null);else h(null),g(null)}catch{h(null)}finally{u(!1)}})()},[m,w,v]);const c=()=>{if(!o?.appointment_date)return"";const _=new Date(o.appointment_date);return{date:_.toLocaleDateString("it-IT",{weekday:"short",day:"numeric",month:"short"}),time:_.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})}},r=()=>{if(!o?.appointment_duration)return"";const _=Math.floor(o.appointment_duration/60),d=o.appointment_duration%60;return _>0&&d>0?`${_}h ${d}min`:_>0?`${_}h`:`${d}min`},N=()=>{b(!0)},C=_=>{_.stopPropagation(),t(!0)},A=()=>{s&&s(),h(null),g(null),u(!0)},D=_=>"★".repeat(_)+"☆".repeat(5-_),T=!!(o?.appointment_date||o?.deposit_amount||o?.total_amount);if(i)return e.jsx("div",{className:"compact-appointment-card loading",children:e.jsxs("div",{className:"loading-content",children:[e.jsx("div",{className:"loading-line"}),e.jsx("div",{className:"loading-line short"})]})});const f=c();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"compact-appointment-card clickable",onClick:N,children:e.jsxs("div",{className:"desktop-layout",children:[e.jsxs("div",{className:"appointment-main",children:[T&&f&&e.jsxs("div",{className:"appointment-datetime",children:[e.jsx("div",{className:"appointment-date",children:f.date}),e.jsx("div",{className:"appointment-time",children:f.time}),o?.appointment_duration&&e.jsxs("div",{className:"appointment-duration",children:["⏱ ",r()]})]}),e.jsxs("div",{className:"appointment-info",children:[x&&e.jsx("div",{className:"appointment-participant-name",children:a?.profile_type==="artist"?x:`con ${x}`}),o&&e.jsx("div",{className:"appointment-subject",children:o.subject})]})]}),(!T&&(o?.body_area||o?.size_category)||o?.status==="completed")&&e.jsx("div",{className:"appointment-details",children:e.jsxs("div",{className:"appointment-details-row",children:[!T&&e.jsxs("div",{className:"appointment-meta",children:[o?.body_area&&e.jsxs("span",{className:"detail-item",children:["📍 ",o.body_area]}),o?.size_category&&e.jsxs("span",{className:"detail-item",children:["📏 ",o.size_category]})]}),o?.status==="completed"&&e.jsx("div",{className:"appointment-review",children:p?e.jsxs("div",{className:"review-content",children:[e.jsxs("div",{className:"review-rating",children:[e.jsx("span",{className:"stars",children:D(p.rating)}),e.jsxs("span",{className:"compact-rating-number",children:["(",p.rating,"/5)"]})]}),p.comment&&e.jsxs("div",{className:"review-comment",children:['"',p.comment,'"']})]}):e.jsx("div",{className:"review-missing",children:a?.profile_type==="client"?e.jsx("button",{className:"review-cta-button",onClick:C,title:"Lascia una recensione",children:"⭐ Recensisci"}):e.jsx("span",{className:"review-text",children:"Nessuna recensione"})})})]})})]})}),e.jsx(K,{isOpen:L,onClose:()=>t(!1),bookingId:m,artistName:a?.profile_type==="client"?x:void 0,artistId:o?.artist_id,onReviewSubmitted:A}),e.jsx(Z,{isOpen:S,onClose:()=>b(!1),userType:a?.profile_type==="artist"?"artist":"client",artistName:a?.profile_type==="client"?x:void 0,clientName:a?.profile_type==="artist"?x:void 0,bookingId:m,showParticipants:j,onBookingUpdated:()=>{s&&s()}})]})}function X({activeSection:m,onSectionChange:x,onSidebarClose:v}){const s=[{id:"appointments",label:"Appuntamenti",icon:"📅",available:!0},{id:"dashboard",label:"Dashboard",icon:"📊",available:!0},{id:"calendar",label:"Calendario",icon:"🗓️",available:!0}];return e.jsxs("div",{className:"management-sidebar",children:[e.jsx("div",{className:"sidebar-header",children:e.jsx("h3",{children:"GESTIONALE"})}),e.jsx("nav",{className:"sidebar-nav",children:s.map(j=>e.jsxs("button",{className:`sidebar-nav-item ${m===j.id?"active":""}`,onClick:()=>{x(j.id),v?.()},children:[e.jsx("span",{className:"nav-icon",children:j.icon}),e.jsx("span",{className:"nav-label",children:j.label})]},j.id))})]})}function ee({onMonthChange:m,initialYear:x,initialMonth:v}){const s=new Date,[j,w]=l.useState(x||s.getFullYear()),[a,i]=l.useState(v||s.getMonth()),u=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"];l.useEffect(()=>{m(j,a)},[j,a,m]);const o=()=>{a===0?(i(11),w(j-1)):i(a-1)},h=()=>{a===11?(i(0),w(j+1)):i(a+1)},p=()=>{w(s.getFullYear()),i(s.getMonth())},g=j===s.getFullYear()&&a===s.getMonth();return e.jsxs("div",{className:"month-slider",children:[e.jsx("button",{className:"month-nav-btn prev-btn",onClick:o,title:"Mese precedente",children:"◀"}),e.jsxs("div",{className:"month-display",children:[e.jsx("span",{className:"month-name",children:u[a]}),e.jsx("span",{className:"year-name",children:j}),!g&&e.jsx("button",{className:"current-month-btn",onClick:p,title:"Vai al mese corrente",children:"Oggi"})]}),e.jsx("button",{className:"month-nav-btn next-btn",onClick:h,title:"Mese successivo",children:"▶"})]})}function te({appointments:m,selectedYear:x,selectedMonth:v}){const[s,j]=l.useState("earnings"),[w,a]=l.useState(600),i=l.useRef(null);l.useEffect(()=>{const t=()=>{if(i.current){const r=i.current.offsetWidth,N=window.innerWidth<=768?32:48;a(Math.max(320,r-N))}};t(),window.addEventListener("resize",t);const c=new ResizeObserver(()=>{setTimeout(t,100)});return i.current&&c.observe(i.current),()=>{window.removeEventListener("resize",t),c.disconnect()}},[]);const u=l.useMemo(()=>{const t=[],c=["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"];for(let r=11;r>=0;r--){const N=new Date(x,v-r,1),C=N.getFullYear(),A=N.getMonth(),D=m.filter(f=>{const _=f.appointment_date?new Date(f.appointment_date):new Date(f.created_at);return _.getFullYear()===C&&_.getMonth()===A&&f.status==="completed"}),T=D.reduce((f,_)=>f+(_.total_amount||0),0);t.push({month:c[A],year:C,monthIndex:A,count:D.length,earnings:T})}return t},[m,x,v]),o=Math.max(...u.map(t=>s==="appointments"?t.count:t.earnings),1),p=(t=>t<=1?4:t<=5?8:t<=10?12:t<=20?24:t<=50?60:t<=100?120:Math.ceil(t*1.2/10)*10)(o),g=w<400?180:w<500?200:300,S=w,b=w<400?40:w<500?50:60,L=b;return e.jsxs("div",{className:"appointment-chart",ref:i,children:[e.jsxs("h3",{className:"chart-title",children:["TREND ",s==="appointments"?"APPUNTAMENTI":"RICAVI"," (12 MESI)"]}),e.jsx("div",{className:"toggle-container",children:e.jsxs("div",{className:"view-toggle",children:[e.jsx("button",{className:`toggle-btn ${s==="earnings"?"active":""}`,onClick:()=>j("earnings"),children:"Ricavi"}),e.jsx("button",{className:`toggle-btn ${s==="appointments"?"active":""}`,onClick:()=>j("appointments"),children:"Appuntamenti"})]})}),e.jsx("div",{className:"chart-container",children:e.jsxs("svg",{width:S,height:g+65,className:"chart-svg",children:[[0,1,2,3,4].map(t=>{const c=20+g-t*g/4,r=t*p/4;return e.jsxs("g",{children:[e.jsx("line",{x1:b,y1:c,x2:S-L,y2:c,stroke:"var(--border)",strokeWidth:1,strokeDasharray:"2,2"}),t>0&&e.jsx("text",{x:b-3,y:c+4,className:"chart-axis-label",textAnchor:"end",children:s==="earnings"?`€${Math.round(r)}`:Math.round(r)})]},t)}),e.jsx("polyline",{fill:"none",stroke:"var(--accent)",strokeWidth:3,points:u.map((t,c)=>{const r=b+c*(S-b-L)/(u.length-1),N=s==="appointments"?t.count:t.earnings,C=20+g-N/p*g;return`${r},${C}`}).join(" ")}),u.map((t,c)=>{const r=b+c*(S-b-L)/(u.length-1),N=s==="appointments"?t.count:t.earnings,C=20+g-N/p*g;return e.jsxs("g",{children:[e.jsx("circle",{cx:r,cy:C,r:4,fill:"var(--accent)",stroke:"var(--background)",strokeWidth:2}),e.jsx("text",{x:r,y:C-10,className:"chart-point-label",textAnchor:"middle",children:s==="earnings"?`€${N}`:N})]},c)}),u.map((t,c)=>{const r=b+c*(S-b-L)/(u.length-1);return c%2===0?e.jsx("text",{x:r,y:g+35,className:"chart-axis-label",textAnchor:"middle",children:t.month},c):null})]})})]})}function ie(){const m=H(),{profile:x}=Y(),{appointments:v,loading:s,error:j,refreshAppointments:w}=J(),[a,i]=l.useState("programmati"),[u,o]=l.useState("appointments"),[h,p]=l.useState(!1),[g,S]=l.useState(new Date().getFullYear()),[b,L]=l.useState(new Date().getMonth()),t=()=>{m("/")};l.useEffect(()=>{const n=()=>{window.innerWidth>768?p(!0):p(!1)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]);const c=v.filter(n=>{switch(a){case"programmati":return n.status==="scheduled"||n.status==="rescheduled";case"completati":return n.status==="completed";case"cancellati":return n.status==="cancelled";default:return!0}}).sort((n,M)=>{const E=n.appointment_date?new Date(n.appointment_date):new Date(n.created_at);return(M.appointment_date?new Date(M.appointment_date):new Date(M.created_at)).getTime()-E.getTime()}),N=(()=>{const n=v.filter(F=>F.status==="scheduled"||F.status==="rescheduled").length,M=v.filter(F=>F.status==="completed").length,E=v.filter(F=>F.status==="cancelled").length;return{programmati:n,completati:M,cancellati:E}})(),C=(n,M)=>{S(n),L(M)},A=()=>{const n=new Date;n.setHours(0,0,0,0);const M=v.filter(y=>{const k=y.appointment_date?new Date(y.appointment_date):new Date(y.created_at);return k.getFullYear()===g&&k.getMonth()===b}),E=M.filter(y=>{if(!y.appointment_date)return!1;const k=new Date(y.appointment_date);return k.setHours(0,0,0,0),k<n}),F=M.filter(y=>{if(!y.appointment_date)return!1;const k=new Date(y.appointment_date);return k.setHours(0,0,0,0),k>=n}),V=E.reduce((y,k)=>y+(k.total_amount||0),0),$=F.reduce((y,k)=>y+(k.total_amount||0),0);return{total:E.length+F.length,scheduled:F.length,completedEarnings:V,scheduledEarnings:$}},D=()=>{const n=new Date,M=[];for(let $=0;$<12;$++){const y=new Date(n.getFullYear(),n.getMonth()-$,1),k=y.getFullYear(),G=y.getMonth(),W=v.filter(R=>{const O=R.appointment_date?new Date(R.appointment_date):new Date(R.created_at);return O.getFullYear()===k&&O.getMonth()===G}),B=W.reduce((R,O)=>R+(O.total_amount||0),0);(W.length>0||B>0)&&M.push({appointments:W.length,earnings:B})}const E=M.length,F=E>0?M.reduce(($,y)=>$+y.appointments,0)/E:0,V=E>0?M.reduce(($,y)=>$+y.earnings,0)/E:0;return{avgAppointments:F,avgEarnings:V,monthsWithData:E}},T=(n,M)=>{if(M===0)return{percentage:0,isPositive:!0};const E=(n-M)/M*100;return{percentage:Math.round(E),isPositive:E>=0}},f=A(),_=D(),d=T(f.total,_.avgAppointments),P=T(f.completedEarnings+f.scheduledEarnings,_.avgEarnings);return s?e.jsxs("div",{className:"page-container",children:[e.jsx(q,{onLogoClick:t,hideOnMobile:!0}),e.jsx("div",{className:"page-loading",children:e.jsx(Q,{})})]}):j?e.jsxs("div",{className:"page-container",children:[e.jsx(q,{onLogoClick:t,hideOnMobile:!0}),e.jsx("div",{className:"container",children:e.jsx("div",{className:"error-state",children:e.jsxs("div",{className:"error-content",children:[e.jsxs("p",{className:"error-message",children:["Errore nel caricamento degli appuntamenti: ",j]}),e.jsx("button",{className:"btn btn-accent retry-btn",onClick:()=>window.location.reload(),style:{marginTop:"1.5rem"},children:"Riprova"})]})})})]}):e.jsxs("div",{className:"page-container appointments-page",children:[e.jsx(q,{onLogoClick:t,hideOnMobile:!0}),x?.profile_type==="artist"?e.jsxs("div",{className:`appointments-container management-layout ${h?"":"sidebar-hidden"}`,children:[h&&e.jsx(X,{activeSection:u,onSectionChange:o,onSidebarClose:()=>p(!1)}),e.jsxs("div",{className:"management-content",children:[e.jsx("button",{className:"sidebar-toggle-btn",onClick:()=>p(!h),title:h?"Nascondi sidebar":"Mostra sidebar",children:h?"◀":"▶"}),u==="appointments"&&e.jsxs(e.Fragment,{children:[v.length===0&&e.jsx(z,{icon:"📅",title:"Nessun appuntamento",description:"Non hai ancora ricevuto richieste di appuntamento. Completa il tuo profilo per attirare nuovi clienti.",action:e.jsx("button",{className:"action-btn",onClick:()=>m("/profile"),children:"Completa Profilo"})}),v.length>0&&e.jsxs("div",{className:"appointments-page-content",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-card",children:[e.jsx("h2",{children:"I MIEI APPUNTAMENTI"}),e.jsx("p",{children:"Gestisci le richieste dei tuoi clienti"})]}),e.jsxs("div",{className:"category-tags",children:[e.jsxs("button",{className:`category-tag ${a==="programmati"?"active":""}`,onClick:()=>i("programmati"),children:["Programmati (",N.programmati,")"]}),e.jsxs("button",{className:`category-tag ${a==="completati"?"active":""}`,onClick:()=>i("completati"),children:["Completati (",N.completati,")"]}),e.jsxs("button",{className:`category-tag ${a==="cancellati"?"active":""}`,onClick:()=>i("cancellati"),children:["Cancellati (",N.cancellati,")"]})]})]}),e.jsx("div",{className:"appointments-content",children:e.jsx("div",{className:"appointments-list",children:c.length===0?e.jsx(z,{icon:"📅",title:`Nessun appuntamento ${a}`,description:`Non hai appuntamenti ${a==="programmati"?"programmati":a} al momento.`}):c.map(n=>e.jsx(U,{bookingId:n.id,participantName:n.client_profile?.full_name||"Cliente",showParticipants:!0,onBookingUpdated:w},n.id))})})]})]}),u==="dashboard"&&e.jsxs("div",{className:"appointments-page-content",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-card",children:[e.jsx("h2",{children:"DASHBOARD"}),e.jsx("p",{children:"Panoramica delle tue attività"})]}),e.jsx(ee,{onMonthChange:C,initialYear:g,initialMonth:b})]}),e.jsxs("div",{className:"dashboard-layout",children:[e.jsx(te,{appointments:v,selectedYear:g,selectedMonth:b}),e.jsxs("div",{className:"dashboard-stats",children:[e.jsx("div",{className:"stats-box",children:e.jsxs("div",{className:"stats-item",children:[e.jsx("span",{className:"stats-label",children:"N. APPUNTAMENTI"}),e.jsxs("span",{className:"stats-value",children:[f.total,f.scheduled>0&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"(",f.scheduled," programmati)"]})]}),e.jsxs("div",{className:`comparison-chip ${d.isPositive?"positive":"negative"}`,children:[d.isPositive?"↗":"↘"," ",Math.abs(d.percentage),"%"]})]})}),e.jsx("div",{className:"stats-box",children:e.jsxs("div",{className:"stats-item",children:[e.jsx("span",{className:"stats-label",children:"RICAVO TOTALE"}),e.jsxs("span",{className:"stats-value",children:["€",(f.completedEarnings+f.scheduledEarnings).toFixed(2),f.scheduledEarnings>0&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"(€",f.scheduledEarnings.toFixed(2)," programmati)"]})]}),e.jsxs("div",{className:`comparison-chip ${P.isPositive?"positive":"negative"}`,children:[P.isPositive?"↗":"↘"," ",Math.abs(P.percentage),"%"]})]})})]})]})]}),u==="calendar"&&e.jsx("div",{className:"appointments-page-content",children:e.jsx("div",{className:"page-header",children:e.jsxs("div",{className:"header-card",children:[e.jsx("h2",{children:"CALENDARIO"}),e.jsx("p",{children:"Gestisci le tue disponibilità"})]})})})]})]}):e.jsxs("div",{className:"appointments-container",children:[v.length===0&&e.jsx(z,{icon:"📅",title:"Nessun appuntamento",description:"Non hai ancora prenotato nessun appuntamento. Esplora i portfolio degli artisti e prenota il tuo primo tatuaggio.",action:e.jsx("button",{className:"action-btn",onClick:()=>m("/"),children:"Esplora Portfolio"})}),v.length>0&&e.jsxs("div",{className:"appointments-page-content",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-card",children:[e.jsx("h2",{children:"I MIEI APPUNTAMENTI"}),e.jsx("p",{children:"Tieni traccia delle tue prenotazioni"})]}),e.jsxs("div",{className:"category-tags",children:[e.jsxs("button",{className:`category-tag ${a==="programmati"?"active":""}`,onClick:()=>i("programmati"),children:["Programmati (",N.programmati,")"]}),e.jsxs("button",{className:`category-tag ${a==="completati"?"active":""}`,onClick:()=>i("completati"),children:["Completati (",N.completati,")"]}),e.jsxs("button",{className:`category-tag ${a==="cancellati"?"active":""}`,onClick:()=>i("cancellati"),children:["Cancellati (",N.cancellati,")"]})]})]}),e.jsx("div",{className:"appointments-content",children:e.jsx("div",{className:"appointments-list",children:c.length===0?e.jsx(z,{icon:"📅",title:`Nessun appuntamento ${a}`,description:`Non hai appuntamenti ${a==="programmati"?"programmati":a} al momento.`}):c.map(n=>e.jsx(U,{bookingId:n.id,participantName:n.artist_profile?.username||n.artist_profile?.full_name||"Artista",showParticipants:!0,onBookingUpdated:w},n.id))})})]})]})]})}export{ie as AppointmentsPage};
