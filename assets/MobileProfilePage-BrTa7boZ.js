const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-wZQoyXLs.js","assets/index-BzcMdIz7.css"])))=>i.map(i=>d[i]);
import{b,a as N,r as s,j as e,A as y,_ as g}from"./index-wZQoyXLs.js";import{E as C}from"./EmptyState-DRbgyEKE.js";const k=s.lazy(()=>g(()=>import("./index-wZQoyXLs.js").then(t=>t.w),__vite__mapDeps([0,1])).then(t=>({default:t.AuthOverlay})));function A(){const{user:t,profile:i,signOut:u}=b(),o=N(),[c,m]=s.useState(!1),[a,p]=s.useState(null),[d,f]=s.useState(!1),x=s.useCallback(()=>{m(!0)},[]);s.useEffect(()=>{window.scrollTo(0,0)},[]),s.useEffect(()=>{const l=n=>{n.preventDefault(),p(n),f(!0)};return window.addEventListener("beforeinstallprompt",l),()=>{window.removeEventListener("beforeinstallprompt",l)}},[]);const h=async()=>{if(!a)return;a.prompt();const{outcome:l}=await a.userChoice;l==="accepted"&&(p(null),f(!1))},r=()=>{if(i?.profile_type==="client"){if(i?.full_name)return i.full_name}else{if(i?.username)return i.username;if(i?.full_name)return i.full_name}if(t?.email){const l=t.email.split("@")[0];return l.includes(".")?l.split(".").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):l}return"Utente"},j=l=>{switch(l){case"client":return"Cliente";case"artist":return"Artista";default:return l}},v=()=>{u(),o("/")};return!t||!i?e.jsxs("div",{className:"mobile-profile-page",children:[e.jsx("div",{className:"container",children:e.jsx(C,{icon:"ðŸ‘¤",title:"Accedi per visualizzare il profilo",description:"Effettua il login per accedere alle impostazioni del tuo profilo e gestire il tuo account.",action:e.jsx("button",{className:"action-btn",style:{marginTop:"1.5rem"},onClick:x,children:"Accedi"})})}),c&&e.jsx(s.Suspense,{fallback:e.jsx("div",{}),children:e.jsx(k,{isOpen:c,onClose:()=>m(!1)})})]}):e.jsx("div",{className:"mobile-profile-page",children:e.jsxs("div",{className:"mobile-profile-content",children:[e.jsxs("div",{className:"mobile-profile-user",children:[e.jsx("div",{className:"mobile-profile-user-header",children:e.jsx("button",{className:"header-icon-btn","aria-label":"Notifiche",title:"Notifiche",children:e.jsx("svg",{className:"header-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})}),e.jsx("div",{className:"mobile-profile-avatar",children:e.jsx(y,{src:i.avatar_url,name:i.profile_type==="client"?i.full_name||r():i.username||i.full_name||r(),alt:`Avatar di ${r()}`,size:"lg",variant:"default"})}),e.jsxs("div",{className:"mobile-profile-info",children:[e.jsx("div",{className:"mobile-profile-name",children:r()}),e.jsx("div",{className:"mobile-profile-type",children:j(i.profile_type)})]})]}),e.jsxs("div",{className:"mobile-profile-menu",children:[i.profile_type!=="artist"&&e.jsxs("button",{className:"mobile-profile-item become-artist-btn",onClick:()=>o("/become-artist"),children:[e.jsx("span",{className:"mobile-profile-item-text",children:"Diventi un'artista"}),e.jsx("svg",{className:"mobile-profile-item-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polyline",{points:"9,18 15,12 9,6"})})]}),i.profile_type==="artist"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"mobile-profile-item",onClick:()=>o("/profile"),children:[e.jsx("span",{className:"mobile-profile-item-text",children:"Il mio profilo"}),e.jsx("svg",{className:"mobile-profile-item-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polyline",{points:"9,18 15,12 9,6"})})]}),e.jsxs("button",{className:"mobile-profile-item",onClick:()=>o("/saved"),children:[e.jsx("span",{className:"mobile-profile-item-text",children:"Elementi salvati"}),e.jsx("svg",{className:"mobile-profile-item-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polyline",{points:"9,18 15,12 9,6"})})]})]}),i.profile_type!=="artist"&&e.jsxs("button",{className:"mobile-profile-item",onClick:()=>o("/appointments"),children:[e.jsx("span",{className:"mobile-profile-item-text",children:"Appuntamenti"}),e.jsx("svg",{className:"mobile-profile-item-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polyline",{points:"9,18 15,12 9,6"})})]}),d&&e.jsxs("button",{className:"mobile-profile-item",onClick:h,children:[e.jsx("span",{className:"mobile-profile-item-text",children:"Installa App"}),e.jsx("svg",{className:"mobile-profile-item-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polyline",{points:"9,18 15,12 9,6"})})]}),e.jsxs("button",{className:"mobile-profile-item",onClick:()=>o("/settings"),children:[e.jsx("span",{className:"mobile-profile-item-text",children:"Impostazioni"}),e.jsx("svg",{className:"mobile-profile-item-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polyline",{points:"9,18 15,12 9,6"})})]}),e.jsxs("button",{className:"mobile-profile-item logout-item",onClick:v,children:[e.jsx("span",{className:"mobile-profile-item-text",children:"Esci"}),e.jsxs("svg",{className:"mobile-profile-item-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"}),e.jsx("polyline",{points:"16,17 21,12 16,7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})]})]})]})})}export{A as MobileProfilePage};
