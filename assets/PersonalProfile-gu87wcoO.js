import{r as o,s as _,j as e,h as He,g as We,b as ve,a as Ze,c as Je,S as ue,L as T,A as pe,P as he,d as fe,U as Qe}from"./index-wZQoyXLs.js";import{u as Ke}from"./TabsNavigation-BdMrOuJ-.js";import{C as Xe}from"./ConfirmationModal-BgklbXeo.js";function Ye(n){const[g,s]=o.useState([]),[d,v]=o.useState(!0),[C,l]=o.useState(null),h=o.useCallback(async()=>{if(!n){s([]),v(!1);return}try{v(!0);const{data:m,error:t}=await _.from("artist_services").select("*").eq("user_id",n).order("created_at",{ascending:!1});if(t)throw t;s(m||[]),l(null)}catch{l("Errore nel caricamento dei servizi"),s([])}finally{v(!1)}},[n]);o.useEffect(()=>{h()},[h]);const w=o.useCallback(async m=>{if(!n)return l("Devi essere autenticato per creare un servizio"),!1;try{const t={name:m.name,description:m.description||null,body_area:m.body_area||null,size_category:m.size_category||null,pricing_type:m.pricing_type,fixed_price:null,price_min:null,price_max:null,discount_percentage:m.discount_percentage||0,image_url:m.image_url||null,user_id:n};m.pricing_type==="fixed"?(t.fixed_price=m.fixed_price,t.price_min=null,t.price_max=null):m.pricing_type==="range"&&(t.price_min=m.price_min,t.price_max=m.price_max,t.fixed_price=null);const{data:p,error:x}=await _.from("artist_services").insert([t]).select().single();if(x)throw x;return s(S=>[p,...S]),l(null),!0}catch{return l("Errore nella creazione del servizio"),!1}},[n]),E=o.useCallback(async(m,t)=>{try{const p={};t.name!==void 0&&(p.name=t.name),t.description!==void 0&&(p.description=t.description||null),t.body_area!==void 0&&(p.body_area=t.body_area||null),t.size_category!==void 0&&(p.size_category=t.size_category||null),t.pricing_type!==void 0?(p.pricing_type=t.pricing_type,t.pricing_type==="fixed"?(p.fixed_price=t.fixed_price||null,p.price_min=null,p.price_max=null):t.pricing_type==="range"&&(p.fixed_price=null,p.price_min=t.price_min||null,p.price_max=t.price_max||null)):(t.fixed_price!==void 0&&(p.fixed_price=t.fixed_price),t.price_min!==void 0&&(p.price_min=t.price_min),t.price_max!==void 0&&(p.price_max=t.price_max)),t.discount_percentage!==void 0&&(p.discount_percentage=t.discount_percentage||0),t.image_url!==void 0&&(p.image_url=t.image_url||null);const{data:x,error:S}=await _.from("artist_services").update(p).eq("id",m).eq("user_id",n).select().single();if(S)throw S;return s(b=>b.map(y=>y.id===m?{...y,...x}:y)),l(null),!0}catch{return l("Errore nell'aggiornamento del servizio"),!1}},[n]),N=o.useCallback(async m=>{try{const{error:t}=await _.from("artist_services").delete().eq("id",m).eq("user_id",n);if(t)throw t;return s(p=>p.filter(x=>x.id!==m)),l(null),!0}catch{return l("Errore nella cancellazione del servizio"),!1}},[n]),z=o.useCallback(()=>{l(null)},[]);return{services:g,loading:d,error:C,createService:w,updateService:E,deleteService:N,refetchServices:h,clearError:z}}function ea({service:n,showEditButton:g=!1,onEdit:s,onDelete:d}){const[v,C]=o.useState(!1),l=o.useRef(null);o.useEffect(()=>{const t=p=>{l.current&&!l.current.contains(p.target)&&C(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const h=t=>{t.stopPropagation(),C(!v)},w=t=>{t.stopPropagation(),C(!1),s&&s(n)},E=t=>{t.stopPropagation(),C(!1),d&&d(n.id)},N=()=>n.pricing_type==="range"&&n.price_min!==null&&n.price_max!==null?`€${n.price_min} - €${n.price_max}`:n.pricing_type==="fixed"&&n.fixed_price!==null?`€${n.fixed_price}`:"Prezzo su richiesta",z=()=>n.pricing_type==="fixed"&&n.fixed_price!==null&&m?`€${(n.fixed_price*(1-n.discount_percentage/100)).toFixed(2)}`:null,m=n.discount_percentage!=null&&n.discount_percentage>0;return e.jsxs("article",{className:"service-card-row",children:[e.jsxs("div",{className:"service-image-thumb",children:[n.image_url?e.jsx("img",{src:We(n.image_url),alt:n.name,className:"service-thumb-img",onError:He}):e.jsx("div",{className:"service-thumb-placeholder",children:e.jsxs("svg",{className:"placeholder-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]})}),m&&e.jsxs("span",{className:"service-discount-badge",children:["-",n.discount_percentage,"%"]})]}),e.jsxs("div",{className:"service-row-content",children:[e.jsx("h3",{className:"service-row-title",children:n.name}),n.description&&e.jsx("p",{className:"service-row-description",children:n.description}),e.jsxs("div",{className:"service-row-details",children:[n.body_area&&e.jsx("span",{className:"service-detail-tag",children:n.body_area}),n.size_category&&e.jsx("span",{className:"service-detail-tag",children:n.size_category})]}),e.jsx("div",{className:"service-price-section",children:m&&z()?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"service-row-price service-price-original",children:N()}),e.jsx("div",{className:"service-row-price service-price-discounted",children:z()})]}):e.jsx("div",{className:"service-row-price",children:N()})})]}),g&&e.jsxs("div",{className:"service-actions-dropdown",ref:l,children:[e.jsx("button",{className:"portfolio-edit-delete-btn",onClick:h,title:"Modifica o elimina servizio",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"12",r:"1"}),e.jsx("circle",{cx:"12",cy:"5",r:"1"}),e.jsx("circle",{cx:"12",cy:"19",r:"1"})]})}),v&&e.jsxs("div",{className:"portfolio-actions-menu",children:[e.jsxs("button",{className:"action-btn portfolio-action-item",onClick:w,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("path",{d:"m18,2l4,4l-14,14h-4v-4L18,2z"}),e.jsx("path",{d:"m13,7l4,4"})]}),e.jsx("span",{children:"Modifica"})]}),e.jsxs("button",{className:"action-btn portfolio-action-item delete-action",onClick:E,children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("polyline",{points:"3,6 5,6 21,6"}),e.jsx("path",{d:"m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),e.jsx("span",{children:"Elimina"})]})]})]})]})}const xe=[{value:"braccio",label:"Braccio"},{value:"gamba",label:"Gamba"},{value:"schiena",label:"Schiena"},{value:"petto",label:"Petto"},{value:"mano",label:"Mano"},{value:"piede",label:"Piede"},{value:"collo",label:"Collo"},{value:"viso",label:"Viso"},{value:"altro",label:"Altro"}],ge=[{value:"piccolo",label:"Piccolo (fino a 5cm)"},{value:"medio",label:"Medio (5-15cm)"},{value:"grande",label:"Grande (15-30cm)"},{value:"extra-grande",label:"Extra Grande (oltre 30cm)"}];function aa({isOpen:n,onClose:g,onSubmit:s,editingService:d=null,isEditing:v=!1}){const{user:C}=ve(),[l,h]=o.useState({name:d?.name||"",description:d?.description||"",body_area:d?.body_area||"",size_category:d?.size_category||"",pricing_type:d?.pricing_type||"fixed",fixed_price:d?.fixed_price||null,price_min:d?.price_min||null,price_max:d?.price_max||null,discount_percentage:d?.discount_percentage||null,image_url:d?.image_url||""}),[w,E]=o.useState(!1),[N,z]=o.useState(!1),[m,t]=o.useState(!1),[p,x]=o.useState(null),[S,b]=o.useState(null),[y,I]=o.useState(!1),R=l.name.trim().length>0&&l.body_area.length>0&&l.size_category.length>0&&(l.pricing_type==="fixed"&&l.fixed_price!==null&&l.fixed_price>0||l.pricing_type==="range"&&l.price_min!==null&&l.price_max!==null&&l.price_min>0&&l.price_max>0),U=async i=>{if(!C?.id)throw new Error("User not authenticated");try{I(!0);const c=i.name.split(".").pop(),L=`service-${Date.now()}-${Math.random().toString(36).substring(2)}.${c}`,k=`${C.id}/${L}`,{error:A}=await _.storage.from("portfolio").upload(k,i,{cacheControl:"3600",upsert:!1});if(A)throw A;const{data:O}=_.storage.from("portfolio").getPublicUrl(k);return O.publicUrl}catch{throw new Error("Errore durante il caricamento dell'immagine")}finally{I(!1)}},Z=i=>{const c=i.target.files?.[0];if(c){if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(c.type)){alert("Formato file non supportato. Usa JPG, PNG o WebP.");return}if(c.size>5*1024*1024){alert("Il file è troppo grande. Dimensione massima: 5MB.");return}x(c);const k=new FileReader;k.onload=A=>b(A.target?.result),k.readAsDataURL(c)}};if(o.useEffect(()=>{d&&(h({name:d.name||"",description:d.description||"",body_area:d.body_area||"",size_category:d.size_category||"",pricing_type:d.pricing_type||"fixed",fixed_price:d.fixed_price||null,price_min:d.price_min||null,price_max:d.price_max||null,discount_percentage:d.discount_percentage||null,image_url:d.image_url||""}),d.image_url&&b(d.image_url))},[d]),o.useEffect(()=>{v&&d?.image_url&&b(d.image_url)},[v,d]),o.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),!n)return null;const j=async i=>{if(i.preventDefault(),!l.name.trim()){alert("Il nome del servizio è obbligatorio");return}if(!l.body_area){alert("L'area del corpo è obbligatoria");return}if(!l.size_category){alert("La dimensione è obbligatoria");return}if(l.pricing_type==="fixed"&&(!l.fixed_price||l.fixed_price<=0)){alert("Il prezzo è obbligatorio per il prezzo fisso");return}if(l.pricing_type==="range"&&(!l.price_min||!l.price_max||l.price_min<=0||l.price_max<=0)){alert("I prezzi minimo e massimo sono obbligatori per il range di prezzo");return}if(l.pricing_type==="range"&&l.price_min&&l.price_max&&l.price_min>l.price_max){alert("Il prezzo minimo non può essere maggiore del prezzo massimo");return}E(!0);try{const c={...l};if(p){const k=await U(p);c.image_url=k}c.pricing_type==="fixed"?(c.price_min=null,c.price_max=null):c.pricing_type==="range"&&(c.fixed_price=null),await s(c)&&(g(),v||(h({name:"",description:"",body_area:"",size_category:"",pricing_type:"fixed",fixed_price:null,price_min:null,price_max:null,discount_percentage:null,image_url:""}),x(null),b(null)))}catch{alert("Errore durante il salvataggio del servizio")}finally{E(!1)}},F=i=>{i.target===i.currentTarget&&g()};return e.jsx("div",{className:"modal-overlay",onClick:F,children:e.jsxs("div",{className:"modal-content auth-modal",children:[e.jsx("div",{className:"auth-header-sticky",children:e.jsx("button",{className:"modal-close-btn",onClick:g,children:"×"})}),e.jsx("div",{className:"auth-modal-header"}),e.jsxs("div",{className:"auth-content",children:[e.jsxs("div",{className:"header-card",children:[e.jsx("h2",{children:v?"MODIFICA SERVIZIO":"AGGIUNGI SERVIZIO"}),e.jsx("p",{children:v?"Modifica i dettagli del tuo servizio":"Aggiungi un nuovo servizio alla tua offerta"})]}),e.jsxs("form",{className:"auth-form",onSubmit:j,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"serviceName",className:"form-label",children:["Nome Servizio ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsx("input",{type:"text",id:"serviceName",className:"form-input",placeholder:"Es. Tatuaggio Tradizionale",value:l.name,onChange:i=>h(c=>({...c,name:i.target.value})),maxLength:100,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"serviceDescription",className:"form-label",children:"Descrizione"}),e.jsx("textarea",{id:"serviceDescription",className:"form-textarea",placeholder:"Descrivi il servizio che offri...",value:l.description,onChange:i=>h(c=>({...c,description:i.target.value})),rows:3,maxLength:500}),e.jsxs("div",{className:"char-count",children:[l.description.length,"/500 caratteri"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"serviceImage",className:"form-label",children:"Immagine di Esempio"}),e.jsxs("div",{className:"image-upload-section",children:[(S||l.image_url)&&e.jsxs("div",{className:"image-preview-container",children:[e.jsx("img",{src:S||l.image_url,alt:"Preview",className:"image-preview"}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>{x(null),b(null),h(i=>({...i,image_url:""}))},children:"×"})]}),e.jsxs("div",{className:"file-upload-container",children:[e.jsx("input",{type:"file",id:"serviceImage",className:"file-input",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:Z,disabled:y}),e.jsxs("label",{htmlFor:"serviceImage",className:"file-upload-btn",children:[e.jsx("svg",{className:"upload-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),e.jsx("span",{children:p?"Cambia Immagine":"Carica Immagine"})]})]}),y&&e.jsx("p",{className:"uploading-text",children:"Caricamento in corso..."}),e.jsx("p",{className:"file-info",children:"JPG, PNG o WebP. Max 5MB."})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Area del Corpo ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"custom-dropdown",children:[e.jsxs("button",{type:"button",className:"dropdown-trigger",onClick:()=>z(!N),children:[e.jsx("span",{className:"dropdown-text",children:l.body_area&&xe.find(i=>i.value===l.body_area)?.label||"Seleziona area"}),e.jsx("svg",{className:"dropdown-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})]}),N&&e.jsxs("div",{className:"dropdown-menu select-dropdown-menu",children:[e.jsx("button",{type:"button",className:"dropdown-item",onClick:()=>{h(i=>({...i,body_area:""})),z(!1)},children:"Seleziona area"}),xe.map(i=>e.jsx("button",{type:"button",className:`dropdown-item ${l.body_area===i.value?"active":""}`,onClick:()=>{h(c=>({...c,body_area:i.value})),z(!1)},children:i.label},i.value))]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Dimensione ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"custom-dropdown",children:[e.jsxs("button",{type:"button",className:"dropdown-trigger",onClick:()=>t(!m),children:[e.jsx("span",{className:"dropdown-text",children:l.size_category&&ge.find(i=>i.value===l.size_category)?.label||"Seleziona dimensione"}),e.jsx("svg",{className:"dropdown-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})]}),m&&e.jsxs("div",{className:"dropdown-menu select-dropdown-menu",children:[e.jsx("button",{type:"button",className:"dropdown-item",onClick:()=>{h(i=>({...i,size_category:""})),t(!1)},children:"Seleziona dimensione"}),ge.map(i=>e.jsx("button",{type:"button",className:`dropdown-item ${l.size_category===i.value?"active":""}`,onClick:()=>{h(c=>({...c,size_category:i.value})),t(!1)},children:i.label},i.value))]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Tipo di Prezzo"}),e.jsxs("div",{className:"radio-group",children:[e.jsxs("label",{className:"radio-option",children:[e.jsx("input",{type:"radio",name:"priceType",checked:l.pricing_type==="fixed",onChange:()=>h(i=>({...i,pricing_type:"fixed",price_min:null,price_max:null}))}),e.jsx("span",{className:"radio-text",children:"Prezzo fisso"})]}),e.jsxs("label",{className:"radio-option",children:[e.jsx("input",{type:"radio",name:"priceType",checked:l.pricing_type==="range",onChange:()=>h(i=>({...i,pricing_type:"range",fixed_price:null,discount_percentage:null}))}),e.jsx("span",{className:"radio-text",children:"Range di prezzo"})]})]})]}),l.pricing_type==="range"?e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"priceMin",className:"form-label",children:["Prezzo Minimo (€) ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsx("input",{type:"number",id:"priceMin",className:"form-input",placeholder:"0",min:"0",step:"0.01",value:l.price_min||"",onChange:i=>h(c=>({...c,price_min:i.target.value?parseFloat(i.target.value):null}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"priceMax",className:"form-label",children:["Prezzo Massimo (€) ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsx("input",{type:"number",id:"priceMax",className:"form-input",placeholder:"0",min:"0",step:"0.01",value:l.price_max||"",onChange:i=>h(c=>({...c,price_max:i.target.value?parseFloat(i.target.value):null}))})]})]}):l.pricing_type==="fixed"?e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"fixedPrice",className:"form-label",children:["Prezzo (€) ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsx("input",{type:"number",id:"fixedPrice",className:"form-input",placeholder:"0",min:"0",step:"0.01",value:l.fixed_price||"",onChange:i=>h(c=>({...c,fixed_price:i.target.value?parseFloat(i.target.value):null}))})]}):null,l.pricing_type==="fixed"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"discount",className:"form-label",children:"Sconto (%)"}),e.jsx("input",{type:"number",id:"discount",className:"form-input",placeholder:"0",min:"0",max:"100",value:l.discount_percentage||"",onChange:i=>h(c=>({...c,discount_percentage:i.target.value?parseInt(i.target.value):null}))})]}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"button",className:"action-btn",onClick:g,disabled:w,children:[e.jsx("svg",{className:"action-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),e.jsx("span",{className:"action-text",children:"Annulla"})]}),e.jsxs("button",{type:"submit",className:"action-btn",disabled:w||y||!v&&!R,children:[e.jsx("svg",{className:"action-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M12 5v14m7-7l-7-7-7 7"})}),e.jsx("span",{className:"action-text",children:w||y?"Salvando...":v?"Aggiorna":"Aggiungi"})]})]})]})]})]})})}function ta(){const n=Ze(),{user:g,profile:s,loading:d,refreshProfile:v}=ve();o.useEffect(()=>{window.scrollTo(0,0)},[]),o.useEffect(()=>{!d&&s&&s.profile_type==="client"&&n("/")},[s,d,n]);const{fetchFollowerStats:C,getFollowerStats:l}=Je(),[h,w]=o.useState(!1),[E,N]=o.useState(!1),[z,m]=o.useState(!1),[t,p]=o.useState(null),[x,S]=o.useState("portfolio"),[b,y]=o.useState(!1),[I,R]=o.useState([]),[U,Z]=o.useState(!0),[j,F]=o.useState({bio:s?.bio||"",location:s?.location||"",avatar_url:s?.avatar_url||"",username:s?.username||""}),[i,c]=o.useState({title:"",description:"",image_url:"",tags:"",is_flash:!1,price:"",location:""}),[L,k]=o.useState(null),[A,O]=o.useState(null),[$,J]=o.useState(""),[ae,q]=o.useState(null),[ie,se]=o.useState(null),[B,le]=o.useState(!1),[je,Q]=o.useState(!1),[G,K]=o.useState(null),[M,X]=o.useState(null),{services:re,loading:Ne,createService:_e,updateService:be,deleteService:ye}=Ye(s?.user_id),{reviews:te,stats:P,loading:we,error:Ce}=Ke(s?.user_id||""),ze=a=>new Date(a).toLocaleDateString("it-IT",{day:"numeric",month:"short",year:"numeric"}),Se=a=>{if(!a)return"Cliente Anonimo";const r=a.username||a.full_name;if(!r)return"Cliente Anonimo";const f=r.split(" ");return f.length>1?`${f[0]} ${f[1].charAt(0)}.`:`${r.charAt(0).toUpperCase()}${r.slice(1)}`},ne=a=>"★".repeat(a)+"☆".repeat(5-a),oe=(a,r)=>{n(`/?search=${encodeURIComponent(a)}&location=${encodeURIComponent(r)}`)},ce=()=>{n("/")},Y=o.useCallback(async()=>{if(s?.user_id)try{const{data:a,error:r}=await _.from("portfolio_items").select("*").eq("user_id",s.user_id).order("created_at",{ascending:!1});if(r)return;const f=(a||[]).map(u=>({id:u.id,title:u.title,description:u.description||"",image_url:u.image_url,tags:u.tags||[],is_flash:u.is_flash||!1,price:u.price,location:u.location,created_at:u.created_at,updated_at:u.updated_at,user_id:u.user_id,artist_name:s.username||s.full_name||"Tu",full_name:s.username||s.full_name||"Tu",artist_avatar_url:s.avatar_url}));R(f)}catch{}finally{Z(!1)}},[s]),ke=async a=>{if(!g?.id||!s?.user_id)throw new Error("User not authenticated");const r=a.name.split(".").pop(),f=`${Date.now()}-${Math.random().toString(36).substring(2)}.${r}`,u=`${g.id}/${f}`,{error:W}=await _.storage.from("portfolio").upload(u,a,{cacheControl:"3600",upsert:!1});if(W)throw W;const{data:ee}=_.storage.from("portfolio").getPublicUrl(u);return ee.publicUrl},Ee=async()=>{if(!(!g||!s)){y(!0);try{let a=i.image_url.trim()||null;if(L)try{a=await ke(L)}catch{alert("Errore durante il caricamento dell'immagine. Riprova."),y(!1);return}const r={title:i.title.trim(),description:i.description.trim()||null,image_url:a,tags:i.tags?i.tags.split(",").map(u=>u.trim()).filter(u=>u):[],is_flash:i.is_flash,price:i.price?parseFloat(i.price):null,location:i.location.trim()||null,updated_at:new Date().toISOString()};let f;if(B&&ie){const{error:u}=await _.from("portfolio_items").update(r).eq("id",ie);f=u}else{const{error:u}=await _.from("portfolio_items").insert({...r,user_id:s.user_id,created_at:new Date().toISOString()});f=u}if(f){alert("Errore durante il caricamento del lavoro");return}V(),await Y(),N(!1)}catch{alert("Errore durante il caricamento del lavoro")}finally{y(!1)}}},Ie=async()=>{if(!(!g||!s)){y(!0);try{let a=j.avatar_url;if(A)try{const f=Date.now(),u=A.name.split(".").pop(),W=`${g.id}/avatar_${f}.${u}`,{data:ee,error:D}=await _.storage.from("avatars").upload(W,A,{cacheControl:"3600",upsert:!1});if(D){D.message?.includes("Bucket not found")?alert("Errore: Il bucket per gli avatar non è configurato. Esegui il file fix-avatars-policies.sql nel database."):D.message?.includes("The resource already exists")?alert("Avatar con questo nome già esistente. Riprova."):D.message?.includes("row-level security policy")||D.message?.includes("RLS")?alert("Errore di permessi: Le politiche RLS per gli avatar non sono configurate correttamente. Esegui il file fix-avatars-policies.sql nel database."):alert(`Errore durante il caricamento dell'avatar: ${D.message}`);return}const{data:Ve}=_.storage.from("avatars").getPublicUrl(ee.path);a=Ve.publicUrl}catch{alert("Errore di rete. Verifica la connessione internet e riprova.");return}const{error:r}=await _.from("profiles").update({bio:j.bio.trim(),location:j.location.trim(),avatar_url:a,username:j.username.trim()||null,updated_at:new Date().toISOString()}).eq("user_id",s.user_id);if(r){alert("Errore durante l'aggiornamento del profilo");return}v&&await v(),O(null),J(""),w(!1)}catch{alert("Errore durante l'aggiornamento del profilo")}finally{y(!1)}}},Ae=a=>{const r=a.target.files?.[0];if(r){if(!r.type.startsWith("image/")){alert("Seleziona un file immagine valido (JPG, PNG, GIF, WebP)");return}const f=5*1024*1024;if(r.size>f){alert("Il file è troppo grande. Dimensione massima: 5MB");return}k(r);const u=new FileReader;u.onload=()=>{q(u.result)},u.readAsDataURL(r)}},V=()=>{c({title:"",description:"",image_url:"",tags:"",is_flash:!1,price:"",location:""}),k(null),q(null),se(null),le(!1)},Pe=a=>{const r=a.target.files?.[0];if(r){if(!r.type.startsWith("image/")){alert("Seleziona un file immagine valido (JPG, PNG, GIF, WebP)");return}const f=2*1024*1024;if(r.size>f){alert("Il file è troppo grande. Dimensione massima: 2MB");return}O(r);const u=new FileReader;u.onload=()=>{J(u.result)},u.readAsDataURL(r)}},Fe=()=>{O(null),J(""),j.avatar_url&&F(a=>({...a,avatar_url:""}))},Le=["Racconta la tua storia come tatuatore","Descrivi il tuo stile artistico preferito","Menziona gli anni di esperienza","Parla delle tue specializzazioni","Condividi la tua filosofia sull'arte del tatuaggio"];o.useEffect(()=>{s&&(F({bio:s.bio||"",location:s.location||"",avatar_url:s.avatar_url||"",username:s.username||""}),Y())},[s,Y]),o.useEffect(()=>(h||E||z?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[h,E,z]);const Me=(s?l(s.user_id):null)?.follower_count||0;o.useEffect(()=>{s?.user_id&&C([s.user_id])},[s?.user_id,C]),o.useEffect(()=>{!d&&(!g||!s)&&n("/")},[g,s,d,n]);const de=a=>{p(a),m(!0)},me=a=>{const r=I.find(f=>f.id===a);r&&(c({title:r.title||"",description:r.description||"",image_url:r.image_url||"",tags:r.tags?r.tags.join(", "):"",is_flash:r.is_flash||!1,price:r.price?.toString()||"",location:r.location||""}),r.image_url&&q(r.image_url),se(a),le(!0),N(!0))},De=async()=>{if(t)try{const{error:a}=await _.from("portfolio_items").delete().eq("id",t);if(a){alert("Errore durante l'eliminazione dell'elemento");return}R(r=>r.filter(f=>f.id!==t)),localStorage.setItem("portfolioItemsUpdated",Date.now().toString()),m(!1),p(null)}catch{alert("Errore durante l'eliminazione dell'elemento")}},Oe=()=>{m(!1),p(null)},Be=()=>{K(null),Q(!0)},Te=a=>{K(a),Q(!0)},Re=a=>{X(a),m(!0)},Ue=async a=>G?await be(G.id,a):await _e(a),$e=()=>{Q(!1),K(null)},qe=async()=>{if(!M)return;await ye(M)&&(m(!1),X(null))},Ge=()=>{m(!1),X(null)};if(d)return e.jsxs("div",{className:"artist-profile",children:[e.jsx(ue,{onSearch:oe,onLogoClick:ce,hideOnMobile:!0}),e.jsx("div",{className:"loading-state",children:e.jsx(T,{size:"large"})})]});if(!g||!s)return null;const H=!s?.bio||!s?.location;return e.jsxs("div",{className:"artist-profile",children:[e.jsx(ue,{onSearch:oe,onLogoClick:ce,hideOnMobile:!0}),e.jsx("main",{className:"artist-profile-content",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"artist-profile-main",children:[e.jsx("section",{className:"artist-profile-header",children:e.jsxs("div",{className:"profile-info",children:[e.jsx(pe,{src:s.avatar_url,name:s.full_name,alt:`Avatar di ${s.username||s.full_name||"Utente"}`,size:"lg",variant:"bordered"}),e.jsxs("div",{className:"profile-details",children:[e.jsx("h1",{className:"profile-name",children:s.profile_type==="client"?s.full_name||"Nome non disponibile":s.username?e.jsxs(e.Fragment,{children:[s.username,s.full_name&&e.jsxs("span",{className:"profile-real-name",children:[" (",s.full_name,")"]})]}):s.full_name||"Nome non disponibile"}),s.location&&e.jsxs("p",{className:"profile-location",children:["📍 ",s.location]}),s.bio&&e.jsx("p",{className:"profile-bio",children:s.bio}),e.jsx("div",{className:"profile-stats",children:e.jsxs("span",{className:"follower-count",children:[e.jsx("strong",{children:Me.toLocaleString()})," follower"]})}),e.jsx("div",{className:"profile-actions",children:e.jsxs("button",{className:"action-btn",onClick:()=>w(!0),children:[e.jsx("span",{className:"action-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("span",{className:"action-text",children:H?"Completa il profilo":"Modifica Profilo"})]})})]})]})}),e.jsxs("section",{className:"artist-profile-tabs",children:[e.jsxs("div",{className:"tabs-navigation",children:[e.jsxs("button",{className:`tab-button ${x==="portfolio"?"active":""}`,onClick:()=>S("portfolio"),children:[e.jsxs("svg",{className:"tab-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]}),e.jsx("span",{className:"tab-text",children:"PORTFOLIO"})]}),e.jsxs("button",{className:`tab-button ${x==="flash"?"active":""}`,onClick:()=>S("flash"),children:[e.jsx("svg",{className:"tab-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polygon",{points:"13,2 3,14 12,14 11,22 21,10 12,10 13,2"})}),e.jsx("span",{className:"tab-text",children:"FLASH"})]}),e.jsxs("button",{className:`tab-button ${x==="servizi"?"active":""}`,onClick:()=>S("servizi"),children:[e.jsx("svg",{className:"tab-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),e.jsx("span",{className:"tab-text",children:"SERVIZI"})]}),e.jsxs("button",{className:`tab-button ${x==="recensioni"?"active":""}`,onClick:()=>S("recensioni"),children:[e.jsx("svg",{className:"tab-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polygon",{points:"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 12,2"})}),e.jsx("span",{className:"tab-text",children:"RECENSIONI"})]})]}),e.jsxs("div",{className:"tab-content",children:[x==="portfolio"&&e.jsxs("div",{className:"tab-panel portfolio-panel",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:"Realizzati"}),e.jsxs("button",{className:"action-btn",onClick:()=>N(!0),children:[e.jsx("span",{className:"action-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M12 5v14m7-7l-7-7-7 7"})})}),e.jsx("span",{className:"action-text",children:"Aggiungi"})]})]}),U?e.jsxs("div",{className:"portfolio-loading",children:[e.jsx(T,{size:"large"}),e.jsx("p",{children:"Caricamento portfolio..."})]}):I.filter(a=>!a.is_flash).length>0?e.jsx("div",{className:"portfolio-grid",children:I.filter(a=>!a.is_flash).map(a=>e.jsx(he,{item:a,onArtistClick:()=>{},showDeleteButton:!0,onDelete:de,onEdit:me},a.id))}):e.jsx("div",{className:"empty-state",children:e.jsxs("div",{className:"empty-content",children:[e.jsx("div",{className:"empty-icon",children:"🎨"}),e.jsx("h3",{className:"empty-title",children:"Portfolio vuoto"}),e.jsx("p",{className:"empty-description",children:"I tuoi lavori appariranno qui una volta che inizierai a caricarli."})]})})]}),x==="servizi"&&e.jsxs("div",{className:"tab-panel servizi-panel",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:"Servizi"}),e.jsxs("button",{className:"action-btn",onClick:Be,children:[e.jsx("span",{className:"action-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M12 5v14m7-7l-7-7-7 7"})})}),e.jsx("span",{className:"action-text",children:"Nuovo Servizio"})]})]}),Ne?e.jsxs("div",{className:"portfolio-loading",children:[e.jsx(T,{size:"large"}),e.jsx("p",{children:"Caricamento servizi..."})]}):re.length>0?e.jsx("div",{className:"services-list",children:re.map(a=>e.jsx(ea,{service:a,showEditButton:!0,onEdit:Te,onDelete:Re},a.id))}):e.jsx("div",{className:"empty-state",children:e.jsxs("div",{className:"empty-content",children:[e.jsx("div",{className:"empty-icon",children:"⚙️"}),e.jsx("h3",{className:"empty-title",children:"Nessun servizio pubblicato"}),e.jsx("p",{className:"empty-description",children:"Aggiungi i tuoi servizi per far conoscere ai clienti cosa offri."})]})})]}),x==="flash"&&e.jsxs("div",{className:"tab-panel flash-panel",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:"Flash"}),e.jsxs("button",{className:"action-btn",onClick:()=>{c(a=>({...a,is_flash:!0})),N(!0)},children:[e.jsx("span",{className:"action-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M12 5v14m7-7l-7-7-7 7"})})}),e.jsx("span",{className:"action-text",children:"Aggiungi"})]})]}),U?e.jsxs("div",{className:"portfolio-loading",children:[e.jsx(T,{size:"large"}),e.jsx("p",{children:"Caricamento flash..."})]}):I.filter(a=>a.is_flash).length>0?e.jsx("div",{className:"portfolio-grid",children:I.filter(a=>a.is_flash).map(a=>e.jsx(he,{item:a,onArtistClick:()=>{},showDeleteButton:!0,onDelete:de,onEdit:me},a.id))}):e.jsx("div",{className:"empty-state",children:e.jsxs("div",{className:"empty-content",children:[e.jsx("div",{className:"empty-icon",children:"⚡"}),e.jsx("h3",{className:"empty-title",children:"Nessun flash disponibile"}),e.jsx("p",{className:"empty-description",children:"I tuoi disegni flash appariranno qui una volta che inizierai a caricarli."})]})})]}),x==="recensioni"&&e.jsxs("div",{className:"tab-panel recensioni-panel",children:[e.jsxs("h3",{children:["LE MIE RECENSIONI ",P&&P.total_reviews>0&&`(${P.total_reviews})`]}),we?e.jsxs("div",{className:"portfolio-loading",children:[e.jsx(T,{size:"large"}),e.jsx("p",{children:"Caricamento recensioni..."})]}):Ce?e.jsx("div",{className:"error-state",children:e.jsx("p",{children:"Errore nel caricamento delle recensioni"})}):te.length>0?e.jsxs(e.Fragment,{children:[P&&e.jsx("div",{className:"reviews-summary",children:e.jsxs("div",{className:"rating-average",children:[e.jsx("span",{className:"artist-rating-number",children:P.average_rating}),e.jsx("div",{className:"rating-stars",children:ne(Math.round(P.average_rating))}),e.jsxs("span",{className:"rating-count",children:[P.total_reviews," ",P.total_reviews===1?"recensione":"recensioni"]})]})}),e.jsx("div",{className:"reviews-list",children:te.map(a=>e.jsxs("div",{className:"review-item",children:[e.jsxs("div",{className:"review-header",children:[e.jsxs("div",{className:"reviewer-info",children:[e.jsx("strong",{children:Se(a.client_profile)}),e.jsx("div",{className:"review-stars",children:ne(a.rating)})]}),e.jsx("span",{className:"review-date",children:ze(a.created_at)})]}),a.comment&&e.jsxs("p",{className:"review-text",children:['"',a.comment,'"']})]},a.id))})]}):e.jsx("div",{className:"empty-state",children:e.jsxs("div",{className:"empty-content",children:[e.jsx("div",{className:"empty-icon",children:"⭐"}),e.jsx("h3",{className:"empty-title",children:"Nessuna recensione"}),e.jsx("p",{className:"empty-description",children:"Le recensioni dei tuoi clienti appariranno qui una volta che avrai completato i primi lavori."})]})})]})]})]})]})})}),h&&e.jsx("div",{className:"modal-overlay",onClick:a=>a.target===a.currentTarget&&w(!1),children:e.jsxs("div",{className:"modal-content auth-modal",children:[e.jsx("div",{className:"auth-header-sticky",children:e.jsx("button",{className:"modal-close-btn",onClick:()=>w(!1),children:"×"})}),e.jsx("div",{className:"auth-modal-header"}),e.jsxs("div",{className:"auth-content",children:[e.jsxs("div",{className:"header-card",children:[e.jsx("h2",{children:H?"COMPLETA IL TUO PROFILO":"MODIFICA PROFILO"}),e.jsx("p",{children:H?"Aggiungi le informazioni mancanti per completare il tuo profilo":"Modifica le informazioni del tuo profilo"})]}),e.jsxs("form",{className:"auth-form",onSubmit:a=>a.preventDefault(),children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"avatar",className:"form-label",children:"FOTO PROFILO"}),e.jsxs("div",{className:"avatar-upload-section",children:[e.jsx("div",{className:"current-avatar",children:e.jsx(pe,{src:$||j.avatar_url,name:s?.username||s?.full_name||g?.email,alt:$?"Anteprima avatar":"Avatar attuale",size:"md",variant:"default"})}),e.jsxs("div",{className:"avatar-upload-controls",children:[e.jsx("input",{type:"file",id:"avatar",accept:"image/*",onChange:Pe,className:"file-input",style:{display:"none"}}),e.jsx(fe,{icon:e.jsx(Qe,{}),text:j.avatar_url||$?"Cambia foto":"Carica foto",onClick:()=>document.getElementById("avatar")?.click()}),($||j.avatar_url)&&e.jsx(fe,{icon:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),text:"Rimuovi",onClick:Fe,variant:"secondary"})]})]}),e.jsx("div",{className:"form-help",children:"Formati supportati: JPG, PNG, GIF, WebP. Dimensione massima: 2MB"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"NOME D'ARTE"}),e.jsx("input",{type:"text",id:"username",className:"form-input",placeholder:"Es. InkMaster, TattooArt...",value:j.username,onChange:a=>F(r=>({...r,username:a.target.value})),maxLength:50}),e.jsx("div",{className:"form-help",children:"Il nome con cui vuoi essere conosciuto. Lascia vuoto per usare il nome completo"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"bio",className:"form-label",children:["BIO ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsx("textarea",{id:"bio",className:"form-textarea",placeholder:"Raccontaci qualcosa su di te...",value:j.bio,onChange:a=>F(r=>({...r,bio:a.target.value})),rows:4,maxLength:500}),e.jsxs("div",{className:"bio-suggestions",children:[e.jsx("p",{className:"suggestions-title",children:"💡 Suggerimenti per la bio:"}),e.jsx("ul",{className:"suggestions-list",children:Le.map((a,r)=>e.jsx("li",{className:"suggestion-item",children:a},r))})]}),e.jsxs("div",{className:"char-count",children:[j.bio.length,"/500 caratteri"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"location",className:"form-label",children:["LOCALITÀ ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsx("input",{type:"text",id:"location",className:"form-input",placeholder:"Es. Milano, Italia",value:j.location,onChange:a=>F(r=>({...r,location:a.target.value})),maxLength:100})]}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"button",className:"action-btn",onClick:()=>w(!1),disabled:b,children:[e.jsx("svg",{className:"action-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),e.jsx("span",{className:"action-text",children:"Annulla"})]}),e.jsxs("button",{type:"button",className:"action-btn",onClick:Ie,disabled:b||!j.bio.trim()||!j.location.trim(),children:[e.jsx("svg",{className:"action-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M20 6L9 17l-5-5"})}),e.jsx("span",{className:"action-text",children:b?"Salvando...":H?"Completa Profilo":"Salva Modifiche"})]})]})]})]})]})}),E&&e.jsx("div",{className:"modal-overlay",onClick:a=>a.target===a.currentTarget&&(N(!1),V()),children:e.jsxs("div",{className:"modal-content auth-modal",children:[e.jsx("div",{className:"auth-header-sticky",children:e.jsx("button",{className:"modal-close-btn",onClick:()=>{N(!1),V()},children:"×"})}),e.jsx("div",{className:"auth-modal-header"}),e.jsxs("div",{className:"auth-content",children:[e.jsxs("div",{className:"header-card",children:[e.jsx("h2",{children:B?"MODIFICA LAVORO":"AGGIUNGI LAVORO"}),e.jsx("p",{children:B?"Modifica i dettagli del tuo lavoro":"Carica un nuovo lavoro nel tuo portfolio"})]}),e.jsxs("form",{className:"auth-form",onSubmit:a=>a.preventDefault(),children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"title",className:"form-label",children:["TITOLO ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsx("input",{type:"text",id:"title",className:"form-input",placeholder:"Es. Tatuaggio Tribale",value:i.title,onChange:a=>c(r=>({...r,title:a.target.value})),maxLength:100})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"DESCRIZIONE"}),e.jsx("textarea",{id:"description",className:"form-textarea",placeholder:"Descrivi il lavoro, tecnica utilizzata, significato...",value:i.description,onChange:a=>c(r=>({...r,description:a.target.value})),rows:3,maxLength:500}),e.jsxs("div",{className:"char-count",children:[i.description.length,"/500 caratteri"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"image_file",className:"form-label",children:["IMMAGINE ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"image-upload-section",children:[ae&&e.jsxs("div",{className:"image-preview-container",children:[e.jsx("img",{src:ae,alt:"Anteprima",className:"image-preview"}),e.jsx("button",{type:"button",className:"remove-image-btn",onClick:()=>{k(null),q(null);const a=document.getElementById("image_file");a&&(a.value="")},children:"×"})]}),e.jsxs("div",{className:"file-upload-container",children:[e.jsx("input",{id:"image_file",className:"file-input",accept:"image/jpeg,image/jpg,image/png,image/webp",type:"file",onChange:Ae}),e.jsxs("label",{htmlFor:"image_file",className:"file-upload-btn",children:[e.jsx("svg",{className:"upload-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),e.jsx("span",{children:"Carica Immagine"})]})]}),e.jsx("p",{className:"file-info",children:"JPG, PNG o WebP. Max 5MB."})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"tags",className:"form-label",children:"TAG"}),e.jsx("input",{type:"text",id:"tags",className:"form-input",placeholder:"Es. tribale, braccio, nero",value:i.tags,onChange:a=>c(r=>({...r,tags:a.target.value}))}),e.jsx("div",{className:"form-help",children:"Separa i tag con virgole"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"upload_location",className:"form-label",children:"LOCALITÀ"}),e.jsx("input",{type:"text",id:"upload_location",className:"form-input",placeholder:"Es. Milano, Italia",value:i.location,onChange:a=>c(r=>({...r,location:a.target.value})),maxLength:100}),e.jsx("div",{className:"form-help",children:"Dove è stato realizzato questo lavoro"})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:i.is_flash,onChange:a=>c(r=>({...r,is_flash:a.target.checked}))}),e.jsx("span",{className:"checkbox-text",children:"È un disegno flash disponibile"})]})}),i.is_flash&&e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"price",className:"form-label",children:["PREZZO (€) ",e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsx("input",{type:"number",id:"price",className:"form-input",placeholder:"120",min:"0",step:"0.01",value:i.price,onChange:a=>c(r=>({...r,price:a.target.value}))})]}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"button",className:"action-btn",onClick:()=>{N(!1),V()},disabled:b,children:[e.jsx("svg",{className:"action-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),e.jsx("span",{className:"action-text",children:"Annulla"})]}),e.jsxs("button",{type:"button",className:"action-btn",onClick:Ee,disabled:b||!i.title.trim()||!L||i.is_flash&&(!i.price||Number(i.price)<=0),children:[e.jsx("svg",{className:"action-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{d:"M12 5v14m7-7l-7-7-7 7"})}),e.jsx("span",{className:"action-text",children:b?B?"Aggiornando...":"Caricando...":B?"Aggiorna":"Aggiungi"})]})]})]})]})]})}),e.jsx(Xe,{isOpen:z,title:M?"Elimina servizio":"Elimina elemento",message:M?"Sei sicuro di voler eliminare questo servizio? Questa azione non può essere annullata.":"Sei sicuro di voler eliminare questo elemento dal portfolio? Questa azione non può essere annullata.",confirmText:"Elimina",cancelText:"Annulla",onConfirm:M?qe:De,onCancel:M?Ge:Oe}),e.jsx(aa,{isOpen:je,onClose:$e,onSubmit:Ue,editingService:G,isEditing:!!G})]})}export{ta as PersonalProfile};
