const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-wZQoyXLs.js","assets/index-BzcMdIz7.css"])))=>i.map(i=>d[i]);
import{a as k,b as E,i as _,r as t,j as e,S as f,L as y,P as A,_ as S}from"./index-wZQoyXLs.js";/* empty css                       */import{P as O}from"./PageHeader-DpnbwZl0.js";import{E as z}from"./EmptyState-DRbgyEKE.js";const F=t.lazy(()=>S(()=>import("./index-wZQoyXLs.js").then(a=>a.w),__vite__mapDeps([0,1])).then(a=>({default:a.AuthOverlay})));function M({onLogoClick:a}){const r=k(),{profile:d}=E(),{portfolioItems:u,loading:j,error:i}=_(),[m,p]=t.useState(!1),[c,x]=t.useState(!1),[n,b]=t.useState("all"),N=t.useCallback(()=>{p(!0)},[]),v=t.useCallback(s=>{r(`/messages/${s}`)},[r]),g=t.useCallback(s=>{d&&d.user_id===s?r("/profile"):r(`/artist/${s}`)},[r,d]),h=t.useCallback(s=>{b(s),x(!1)},[]),C=t.useCallback(s=>{switch(s){case"flash":return"Flash";case"realized":return"Realizzati";default:return"Tutti"}},[]);t.useEffect(()=>{window.scrollTo(0,0)},[]);const l=t.useMemo(()=>{let s=[...u];return n==="flash"?s=s.filter(o=>o.is_flash===!0):n==="realized"&&(s=s.filter(o=>o.is_flash===!1)),s.sort((o,w)=>{const T=new Date(o.created_at).getTime();return new Date(w.created_at).getTime()-T})},[u,n]);return j?e.jsxs("div",{className:"page-container",children:[e.jsx(f,{onLogoClick:a,hideOnMobile:!0}),e.jsx("div",{className:"page-loading",children:e.jsx(y,{})})]}):e.jsxs("div",{className:"saved-items-page",children:[e.jsx(f,{onLogoClick:a,hideOnMobile:!0}),e.jsxs("div",{className:"container",children:[!i&&l.length===0&&e.jsx(z,{icon:"ðŸ†•",title:"Nessuna opera recente",description:"Non ci sono ancora opere da mostrare. Torna piÃ¹ tardi per scoprire le ultime opere pubblicate dalla community.",action:e.jsx("button",{className:"action-btn",onClick:a,style:{marginTop:"1.5rem"},children:"Torna alla Home"})}),(l.length>0||i)&&e.jsxs("div",{className:"page-content",children:[l.length>0&&e.jsx(O,{title:"USCITE RECENTEMENTE",subtitle:l.length===1?"1 opera recente":`${l.length} opere recenti`,actions:e.jsxs("div",{className:"filter-dropdown",children:[e.jsxs("button",{className:"action-btn","aria-expanded":c,onClick:()=>x(!c),children:[e.jsx("svg",{className:"filter-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polygon",{points:"22,3 2,3 10,12.46 10,19 14,21 14,12.46"})}),e.jsx("span",{className:"action-text",children:C(n)}),e.jsx("span",{className:"action-icon",children:e.jsx("svg",{className:`chevron-icon ${c?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})})]}),c&&e.jsxs("div",{className:"filter-dropdown-menu",children:[e.jsx("button",{className:`action-btn ${n==="all"?"active":""}`,onClick:()=>h("all"),children:e.jsx("span",{className:"action-text",children:"Tutti"})}),e.jsx("button",{className:`action-btn ${n==="flash"?"active":""}`,onClick:()=>h("flash"),children:e.jsx("span",{className:"action-text",children:"Flash"})}),e.jsx("button",{className:`action-btn ${n==="realized"?"active":""}`,onClick:()=>h("realized"),children:e.jsx("span",{className:"action-text",children:"Realizzati"})})]})]})}),i&&e.jsx("div",{className:"error-state",children:e.jsxs("div",{className:"error-content",children:[e.jsx("p",{className:"error-message",children:i}),e.jsx("button",{className:"btn btn-accent retry-btn",onClick:a,style:{marginTop:"1.5rem"},children:"Torna alla Home"})]})}),!i&&l.length>0&&e.jsx("div",{className:"portfolio-grid",children:l.map(s=>e.jsx(A,{item:s,onArtistClick:g,onAuthRequired:N,onContactArtist:v},s.id))})]})]}),m&&e.jsx(t.Suspense,{fallback:e.jsx("div",{}),children:e.jsx(F,{isOpen:m,onClose:()=>p(!1)})})]})}export{M as RecentWorksPage};
